<!DOCTYPE html><html lang="zh-cn" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>LeetCode 虚拟周赛 103 | Ar Blog rre MSNeko</title><meta name="keywords" content="LeetCode 周赛总结"><meta name="author" content="MiracleSNeko"><meta name="copyright" content="MiracleSNeko"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="LeetCode 虚拟周赛 103   人做麻了，被 T2 自己的傻逼想法卡死  T1 908. 最小差值 I   通过的用户数257   尝试过的用户数282   用户总通过次数263   用户总提交次数485   题目难度 Easy  给你一个整数数组 nums，请你给数组中的每个元素 nums[i] 都加上一个任意数字 x （-k &lt;&#x3D; x &lt;&#x3D; k），从而得到一个新数组 re">
<meta property="og:type" content="article">
<meta property="og:title" content="LeetCode 虚拟周赛 103">
<meta property="og:url" content="http://example.com/2021/11/15/virtual-contest-103/index.html">
<meta property="og:site_name" content="Ar Blog rre MSNeko">
<meta property="og:description" content="LeetCode 虚拟周赛 103   人做麻了，被 T2 自己的傻逼想法卡死  T1 908. 最小差值 I   通过的用户数257   尝试过的用户数282   用户总通过次数263   用户总提交次数485   题目难度 Easy  给你一个整数数组 nums，请你给数组中的每个元素 nums[i] 都加上一个任意数字 x （-k &lt;&#x3D; x &lt;&#x3D; k），从而得到一个新数组 re">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2021-11-15T15:39:59.000Z">
<meta property="article:modified_time" content="2021-11-17T15:16:56.273Z">
<meta property="article:author" content="MiracleSNeko">
<meta property="article:tag" content="LeetCode 周赛总结">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2021/11/15/virtual-contest-103/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'LeetCode 虚拟周赛 103',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-11-17 23:16:56'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">21</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">6</div></a></div></div></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Ar Blog rre MSNeko</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">LeetCode 虚拟周赛 103</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-11-15T15:39:59.000Z" title="Created 2021-11-15 23:39:59">2021-11-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-11-17T15:16:56.273Z" title="Updated 2021-11-17 23:16:56">2021-11-17</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="LeetCode 虚拟周赛 103"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><hr>
<h1 id="LeetCode-虚拟周赛-103"><a href="#LeetCode-虚拟周赛-103" class="headerlink" title="LeetCode 虚拟周赛 103"></a>LeetCode 虚拟周赛 103</h1><blockquote>
<p>  人做麻了，被 T2 自己的傻逼想法卡死</p>
</blockquote>
<h2 id="T1-908-最小差值-I"><a href="#T1-908-最小差值-I" class="headerlink" title="T1 908. 最小差值 I"></a>T1 908. 最小差值 I</h2><ul>
<li>  <strong>通过的用户数</strong>257</li>
<li>  <strong>尝试过的用户数</strong>282</li>
<li>  <strong>用户总通过次数</strong>263</li>
<li>  <strong>用户总提交次数</strong>485</li>
<li>  <strong>题目难度</strong> <strong>Easy</strong></li>
</ul>
<p>给你一个整数数组 <code>nums</code>，请你给数组中的每个元素 <code>nums[i]</code> 都加上一个任意数字 <code>x</code> （<code>-k &lt;= x &lt;= k</code>），从而得到一个新数组 <code>result</code> 。</p>
<p>返回数组 <code>result</code> 的最大值和最小值之间可能存在的最小差值。</p>
<p><strong>示例 1：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [1], k = 0</span><br><span class="line">输出：0</span><br><span class="line">解释：result = [1]</span><br></pre></td></tr></table></figure>

<p><strong>示例 2：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [0,10], k = 2</span><br><span class="line">输出：6</span><br><span class="line">解释：result = [2,8]</span><br></pre></td></tr></table></figure>

<p><strong>示例 3：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [1,3,6], k = 3</span><br><span class="line">输出：0</span><br><span class="line">解释：result = [3,3,3] or result = [4,4,4]</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong></p>
<ul>
<li>  <code>1 &lt;= nums.length &lt;= 10000</code></li>
<li>  <code>0 &lt;= nums[i] &lt;= 10000</code></li>
<li>  <code>0 &lt;= k &lt;= 10000</code></li>
</ul>
<p><strong>提交：</strong></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span> Solution &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">smallest_range_i</span></span>(nums: <span class="built_in">Vec</span>&lt;<span class="built_in">i32</span>&gt;, k: <span class="built_in">i32</span>) -&gt; <span class="built_in">i32</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> max = nums.iter().max().unwrap();</span><br><span class="line">        <span class="keyword">let</span> min = nums.iter().min().unwrap();</span><br><span class="line">        (max-min-<span class="number">2</span>*k).max(<span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="T2-909-蛇梯棋"><a href="#T2-909-蛇梯棋" class="headerlink" title="T2 909. 蛇梯棋"></a>T2 909. 蛇梯棋</h2><ul>
<li>  <strong>通过的用户数</strong>11</li>
<li>  <strong>尝试过的用户数</strong>57</li>
<li>  <strong>用户总通过次数</strong>11</li>
<li>  <strong>用户总提交次数</strong>177</li>
<li>  <strong>题目难度</strong> <strong>Medium</strong></li>
</ul>
<p>给你一个大小为 <code>n x n</code> 的整数矩阵 <code>board</code> ，方格按从 <code>1</code> 到 <code>n2</code> 编号，编号遵循 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%89%9B%E8%80%95%E5%BC%8F%E8%BD%AC%E8%A1%8C%E4%B9%A6%E5%86%99%E6%B3%95/17195786">转行交替方式</a> ，<strong>从左下角开始</strong> （即，从 <code>board[n - 1][0]</code> 开始）每一行交替方向。</p>
<p>玩家从棋盘上的方格 <code>1</code> （总是在最后一行、第一列）开始出发。</p>
<p>每一回合，玩家需要从当前方格 <code>curr</code> 开始出发，按下述要求前进：</p>
<ul>
<li><p>选定目标方格 next ，目标方格的编号符合范围 [curr + 1, min(curr + 6, n^2)]</p>
<ul>
<li>  该选择模拟了掷 <strong>六面体骰子</strong> 的情景，无论棋盘大小如何，玩家最多只能有 6 个目的地。</li>
</ul>
</li>
<li><p>  传送玩家：如果目标方格 <code>next</code> 处存在蛇或梯子，那么玩家会传送到蛇或梯子的目的地。否则，玩家传送到目标方格 <code>next</code> 。 </p>
</li>
<li><p>  当玩家到达编号 <code>n^2</code> 的方格时，游戏结束。</p>
</li>
</ul>
<p><code>r</code> 行 <code>c</code> 列的棋盘，按前述方法编号，棋盘格中可能存在 “蛇” 或 “梯子”；如果 <code>board[r][c] != -1</code>，那个蛇或梯子的目的地将会是 <code>board[r][c]</code>。编号为 <code>1</code> 和 <code>n^2</code> 的方格上没有蛇或梯子。</p>
<p>注意，玩家在每回合的前进过程中最多只能爬过蛇或梯子一次：就算目的地是另一条蛇或梯子的起点，玩家也 <strong>不能</strong> 继续移动。</p>
<ul>
<li>  举个例子，假设棋盘是 <code>[[-1,4],[-1,3]]</code> ，第一次移动，玩家的目标方格是 <code>2</code> 。那么这个玩家将会顺着梯子到达方格 <code>3</code> ，但 <strong>不能</strong> 顺着方格 <code>3</code> 上的梯子前往方格 <code>4</code> 。</li>
</ul>
<p>返回达到编号为 <code>n^2</code> 的方格所需的最少移动次数，如果不可能，则返回 <code>-1</code>。</p>
<p><strong>示例 1：</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2018/09/23/snakes.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">输入：board = [[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,35,-1,-1,13,-1],[-1,-1,-1,-1,-1,-1],[-1,15,-1,-1,-1,-1]]</span><br><span class="line">输出：4</span><br><span class="line">解释：</span><br><span class="line">首先，从方格 1 [第 5 行，第 0 列] 开始。 </span><br><span class="line">先决定移动到方格 2 ，并必须爬过梯子移动到到方格 15 。</span><br><span class="line">然后决定移动到方格 17 [第 3 行，第 4 列]，必须爬过蛇到方格 13 。</span><br><span class="line">接着决定移动到方格 14 ，且必须通过梯子移动到方格 35 。 </span><br><span class="line">最后决定移动到方格 36 , 游戏结束。 </span><br><span class="line">可以证明需要至少 4 次移动才能到达最后一个方格，所以答案是 4 。 </span><br></pre></td></tr></table></figure>

<p><strong>示例 2：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：board = [[-1,-1],[-1,3]]</span><br><span class="line">输出：1</span><br></pre></td></tr></table></figure>

<p> <strong>提示：</strong></p>
<ul>
<li>  <code>n == board.length == board[i].length</code></li>
<li>  <code>2 &lt;= n &lt;= 20</code></li>
<li>  <code>grid[i][j]</code> 的值是 <code>-1</code> 或在范围 <code>[1, n2]</code> 内</li>
<li>  编号为 <code>1</code> 和 <code>n2</code> 的方格上没有蛇或梯子</li>
</ul>
<p><strong>题解：</strong></p>
<blockquote>
<p>  完全想复杂了，转图写了个 Dijk，还有个本质的 bug</p>
</blockquote>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// Dummy Luogu/LeetCode Playground</span></span><br><span class="line"><span class="keyword">use</span> std::cell::RefCell;</span><br><span class="line"><span class="keyword">use</span> std::cmp::&#123;max, min, Reverse&#125;;</span><br><span class="line"><span class="keyword">use</span> std::collections::&#123;BTreeMap, BinaryHeap, HashMap, HashSet, VecDeque&#125;;</span><br><span class="line"><span class="keyword">use</span> std::convert::&#123;<span class="built_in">From</span>, <span class="built_in">Into</span>, TryFrom, TryInto&#125;;</span><br><span class="line"><span class="comment">// use std::io;</span></span><br><span class="line"><span class="keyword">use</span> std::marker::PhantomData;</span><br><span class="line"><span class="keyword">use</span> std::rc::Rc;</span><br><span class="line"><span class="keyword">use</span> std::slice::SliceIndex;</span><br><span class="line"></span><br><span class="line"><span class="built_in">macro_rules!</span> map_or_insert &#123;</span><br><span class="line">    ($map: expr, $key: expr, $<span class="function"><span class="keyword">fn</span>: <span class="title">expr</span>, $<span class="title">val</span>: <span class="title">expr</span>) =&gt; &#123;&#123;</span></span><br><span class="line"><span class="function">        <span class="title">match</span> $<span class="title">map</span>.<span class="title">get_mut</span></span>(&amp;$key) &#123;</span><br><span class="line">            <span class="literal">Some</span>(v) =&gt; &#123;</span><br><span class="line">                $<span class="function"><span class="keyword">fn</span></span>(v);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="literal">None</span> =&gt; &#123;</span><br><span class="line">                $map.insert($key, $val);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LinkedForwardStar</span></span> &#123;</span><br><span class="line">    to: <span class="built_in">Vec</span>&lt;<span class="built_in">usize</span>&gt;,</span><br><span class="line">    nxt: <span class="built_in">Vec</span>&lt;<span class="built_in">usize</span>&gt;,</span><br><span class="line">    wht: <span class="built_in">Vec</span>&lt;<span class="built_in">i32</span>&gt;,</span><br><span class="line">    hd: <span class="built_in">Vec</span>&lt;<span class="built_in">usize</span>&gt;,</span><br><span class="line">    tot: <span class="built_in">usize</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> LinkedForwardStar &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">with_capacity</span></span>(cap: <span class="built_in">usize</span>) -&gt; <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">Self</span> &#123;</span><br><span class="line">            to: <span class="built_in">vec!</span>[<span class="built_in">usize</span>::MAX; cap],</span><br><span class="line">            nxt: <span class="built_in">vec!</span>[<span class="built_in">usize</span>::MAX; cap],</span><br><span class="line">            wht: <span class="built_in">vec!</span>[<span class="number">0</span>; cap],</span><br><span class="line">            hd: <span class="built_in">vec!</span>[<span class="built_in">usize</span>::MAX; cap],</span><br><span class="line">            tot: <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">add</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, u: <span class="built_in">usize</span>, v: <span class="built_in">usize</span>, w: <span class="built_in">i32</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.tot += <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">self</span>.to[<span class="keyword">self</span>.tot] = v;</span><br><span class="line">        <span class="keyword">self</span>.nxt[<span class="keyword">self</span>.tot] = <span class="keyword">self</span>.hd[u];</span><br><span class="line">        <span class="keyword">self</span>.wht[<span class="keyword">self</span>.tot] = w;</span><br><span class="line">        <span class="keyword">self</span>.hd[u] = <span class="keyword">self</span>.tot;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">dijkstra_solver</span></span>(&amp;<span class="keyword">self</span>, src: <span class="built_in">usize</span>, n: <span class="built_in">usize</span>) -&gt; <span class="built_in">i32</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> INF: <span class="built_in">i32</span> = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> dist = <span class="built_in">vec!</span>[INF; n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> path = <span class="built_in">vec!</span>[<span class="number">0</span>; n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> vis = <span class="built_in">vec!</span>[<span class="built_in">vec!</span>[<span class="number">0</span>; <span class="number">2</span>]; n + <span class="number">1</span>];</span><br><span class="line">        dist[src] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> heap = BinaryHeap::new();</span><br><span class="line">        heap.push((dist[src], src, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">let</span> <span class="literal">Some</span>((_, u, flag)) = heap.pop() &#123;</span><br><span class="line">            <span class="keyword">if</span> vis[u][flag] != <span class="number">0</span> &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            vis[u][flag] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">let</span> <span class="keyword">mut</span> e = <span class="keyword">self</span>.hd[u];</span><br><span class="line">            <span class="keyword">while</span> e != <span class="built_in">usize</span>::MAX &#123;</span><br><span class="line">                <span class="keyword">let</span> v = <span class="keyword">self</span>.to[e];</span><br><span class="line">                <span class="keyword">let</span> w = <span class="keyword">self</span>.wht[e];</span><br><span class="line">                <span class="keyword">if</span> dist[v] &gt; dist[u] + w.abs() &amp;&amp; !(flag == <span class="number">1</span> &amp;&amp; w != <span class="number">1</span>) &#123;</span><br><span class="line">                    dist[v] = dist[u] + w.abs();</span><br><span class="line">                    path[v] = u;</span><br><span class="line">                    <span class="keyword">if</span> w != <span class="number">1</span> &#123;</span><br><span class="line">                        heap.push((dist[v], v, <span class="number">1</span>));</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        heap.push((dist[v], v, <span class="number">0</span>));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                e = <span class="keyword">self</span>.nxt[e];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> ans = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> prv = path[n];</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> cur = path[n];</span><br><span class="line">        <span class="keyword">while</span> cur != <span class="number">0</span> &#123;</span><br><span class="line">            <span class="comment">// println!(&quot;&#123;:#?&#125;&quot;, cur);</span></span><br><span class="line">            cur = path[cur];</span><br><span class="line">            <span class="keyword">if</span> prv - cur &gt; <span class="number">6</span> &#123;</span><br><span class="line">                prv = cur;</span><br><span class="line">                ans += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ans</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Solution &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">snakes_and_ladders</span></span>(board: <span class="built_in">Vec</span>&lt;<span class="built_in">Vec</span>&lt;<span class="built_in">i32</span>&gt;&gt;) -&gt; <span class="built_in">i32</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> n = board.len();</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> lfs = LinkedForwardStar::with_capacity(<span class="number">200020</span>);</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..n &#123;</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="number">0</span>..n &#123;</span><br><span class="line">                <span class="keyword">let</span> idx = Solution::to_index(i, j, n);</span><br><span class="line">                <span class="keyword">let</span> i = n - i - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> idx == n * n &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                lfs.add(idx, idx + <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span> board[i][j] != -<span class="number">1</span> &#123;</span><br><span class="line">                    <span class="comment">// println!(&quot;&#123;&#125;-&gt;&#123;&#125;&quot;, idx, board[i][j]);</span></span><br><span class="line">                    lfs.add(idx, board[i][j] <span class="keyword">as</span> <span class="built_in">usize</span>, -<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        lfs.dijkstra_solver(<span class="number">1</span>, n * n)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">to_index</span></span>(x: <span class="built_in">usize</span>, y: <span class="built_in">usize</span>, n: <span class="built_in">usize</span>) -&gt; <span class="built_in">usize</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ((x / n) &amp; <span class="number">1</span>) == <span class="number">0</span> &#123;</span><br><span class="line">            x * n + y + <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            x * n + (n - y)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>  然后挂在了如下测试点</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">input: [[-1,-1,-1],[-1,9,8],[-1,8,9]]</span><br><span class="line">output: 2</span><br><span class="line">answer: 1</span><br></pre></td></tr></table></figure>

<p>  最生气的是这题我 tm 还做过，BFS 的 AC 代码如下</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	debug.SetGCPercent(<span class="number">-1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">updatePos</span><span class="params">(idx <span class="keyword">int</span>, n <span class="keyword">int</span>)</span> <span class="params">(r <span class="keyword">int</span>, c <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	r, c = (idx<span class="number">-1</span>)/n, (idx<span class="number">-1</span>)%n</span><br><span class="line">	<span class="keyword">if</span> r&amp;<span class="number">1</span> == <span class="number">1</span> &#123;</span><br><span class="line">		c = n - <span class="number">1</span> - c</span><br><span class="line">	&#125;</span><br><span class="line">	r = n - <span class="number">1</span> - r</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Pair <span class="keyword">struct</span> &#123;</span><br><span class="line">	idx  <span class="keyword">int</span></span><br><span class="line">	step <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">snakesAndLadders</span><span class="params">(board [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	n := <span class="built_in">len</span>(board)</span><br><span class="line">	vis := <span class="built_in">make</span>([]<span class="keyword">bool</span>, n*n+<span class="number">1</span>)</span><br><span class="line">	q := []Pair&#123;&#123;<span class="number">1</span>, <span class="number">0</span>&#125;&#125;</span><br><span class="line">	<span class="keyword">for</span> <span class="built_in">len</span>(q) &gt; <span class="number">0</span> &#123;</span><br><span class="line">		p := q[<span class="number">0</span>]</span><br><span class="line">		q = q[<span class="number">1</span>:]</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">6</span>; i++ &#123;</span><br><span class="line">			nxt := p.idx + i</span><br><span class="line">			<span class="keyword">if</span> nxt &lt; <span class="number">0</span> || nxt &gt; n*n &#123;</span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			&#125;</span><br><span class="line">			r, c := updatePos(nxt, n)</span><br><span class="line">			<span class="comment">// 梯子或者蛇</span></span><br><span class="line">			<span class="keyword">if</span> board[r][c] != <span class="number">-1</span> &#123;</span><br><span class="line">				nxt = board[r][c]</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> nxt == n*n &#123;</span><br><span class="line">				<span class="keyword">return</span> p.step + <span class="number">1</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> !vis[nxt] &#123;</span><br><span class="line">				vis[nxt] = <span class="literal">true</span></span><br><span class="line">				q = <span class="built_in">append</span>(q, Pair&#123;nxt, p.step + <span class="number">1</span>&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>  其实写到一半已经意识到这个图 tm 所有的边权都是 1，该转 BFS 了，但是还是头铁 md</p>
</blockquote>
<h2 id="L3-910-最小差值-II"><a href="#L3-910-最小差值-II" class="headerlink" title="L3 910. 最小差值 II"></a>L3 910. 最小差值 II</h2><ul>
<li>  <strong>通过的用户数</strong>7</li>
<li>  <strong>尝试过的用户数</strong>154</li>
<li>  <strong>用户总通过次数</strong>7</li>
<li>  <strong>用户总提交次数</strong>646</li>
<li>  <strong>题目难度</strong> <strong>Medium</strong></li>
</ul>
<p>给你一个整数数组 <code>A</code>，对于每个整数 <code>A[i]</code>，可以选择 <strong><code>x = -K</code> 或是 <code>x = K</code></strong> （<code>**K**</code> 总是非负整数），并将 <code>x</code> 加到 <code>A[i]</code> 中。</p>
<p>在此过程之后，得到数组 <code>B</code>。</p>
<p>返回 <code>B</code> 的最大值和 <code>B</code> 的最小值之间可能存在的最小差值。</p>
<p><strong>示例 1：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：A = [1], K = 0</span><br><span class="line">输出：0</span><br><span class="line">解释：B = [1]</span><br></pre></td></tr></table></figure>

<p><strong>示例 2：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：A = [0,10], K = 2</span><br><span class="line">输出：6</span><br><span class="line">解释：B = [2,8]</span><br></pre></td></tr></table></figure>

<p><strong>示例 3：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：A = [1,3,6], K = 3</span><br><span class="line">输出：3</span><br><span class="line">解释：B = [4,6,3]</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong></p>
<ul>
<li>  <code>1 &lt;= A.length &lt;= 10000</code></li>
<li>  <code>0 &lt;= A[i] &lt;= 10000</code></li>
<li>  <code>0 &lt;= K &lt;= 10000</code></li>
</ul>
<p><strong>题解：</strong></p>
<blockquote>
<p>  <a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/smallest-range-ii/solution/tai-nan-liao-zhi-neng-hua-tu-ping-zhi-jue-by-user8/">太难了，只能画图凭直觉 - 最小差值 II - 力扣（LeetCode） (leetcode-cn.com)</a></p>
<p>  贪心思路。至于为什么是对的，证明可以参考官解。</p>
</blockquote>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span> Solution &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">smallest_range_ii</span></span>(<span class="keyword">mut</span> nums: <span class="built_in">Vec</span>&lt;<span class="built_in">i32</span>&gt;, k: <span class="built_in">i32</span>) -&gt; <span class="built_in">i32</span> &#123;</span><br><span class="line">        nums.sort();</span><br><span class="line">        <span class="keyword">let</span> n = nums.len();</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> ans = nums[n - <span class="number">1</span>] - nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..n-<span class="number">1</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> max = (nums[i] + k).max(nums[n - <span class="number">1</span>] - k);</span><br><span class="line">            <span class="keyword">let</span> min = (nums[<span class="number">0</span>] + k).min(nums[i + <span class="number">1</span>] - k);</span><br><span class="line">            ans = ans.min(max - min);</span><br><span class="line">        &#125;</span><br><span class="line">        ans</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="T4-911-在线选举"><a href="#T4-911-在线选举" class="headerlink" title="T4 911. 在线选举"></a>T4 911. 在线选举</h2><ul>
<li>  <strong>通过的用户数</strong>14</li>
<li>  <strong>尝试过的用户数</strong>35</li>
<li>  <strong>用户总通过次数</strong>14</li>
<li>  <strong>用户总提交次数</strong>94</li>
<li>  <strong>题目难度</strong> <strong>Medium</strong></li>
</ul>
<p>在选举中，第 <code>i</code> 张票是在时间为 <code>times[i]</code> 时投给 <code>persons[i]</code> 的。</p>
<p>现在，我们想要实现下面的查询函数： <code>TopVotedCandidate.q(int t)</code> 将返回在 <code>t</code> 时刻主导选举的候选人的编号。</p>
<p>在 <code>t</code> 时刻投出的选票也将被计入我们的查询之中。在平局的情况下，最近获得投票的候选人将会获胜。</p>
<p><strong>示例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">输入：[&quot;TopVotedCandidate&quot;,&quot;q&quot;,&quot;q&quot;,&quot;q&quot;,&quot;q&quot;,&quot;q&quot;,&quot;q&quot;], [[[0,1,1,0,0,1,0],[0,5,10,15,20,25,30]],[3],[12],[25],[15],[24],[8]]</span><br><span class="line">输出：[null,0,1,1,0,0,1]</span><br><span class="line">解释：</span><br><span class="line">时间为 3，票数分布情况是 [0]，编号为 0 的候选人领先。</span><br><span class="line">时间为 12，票数分布情况是 [0,1,1]，编号为 1 的候选人领先。</span><br><span class="line">时间为 25，票数分布情况是 [0,1,1,0,0,1]，编号为 1 的候选人领先（因为最近的投票结果是平局）。</span><br><span class="line">在时间 15、24 和 8 处继续执行 3 个查询。</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong></p>
<ol>
<li> <code>1 &lt;= persons.length = times.length &lt;= 5000</code></li>
<li> <code>0 &lt;= persons[i] &lt;= persons.length</code></li>
<li> <code>times</code> 是严格递增的数组，所有元素都在 <code>[0, 10^9]</code> 范围中。</li>
<li> 每个测试用例最多调用 <code>10000</code> 次 <code>TopVotedCandidate.q</code>。</li>
<li> <code>TopVotedCandidate.q(int t)</code> 被调用时总是满足 <code>t &gt;= times[0]</code>。</li>
</ol>
<p><strong>题解：</strong></p>
<blockquote>
<p>  离线查询。预处理每个选票到达时刻的结果，记录 (Time, Winner) 对，这可以通过维护一个 CurrMaxCnt 和 CurrWinner ，在每次插入选票的时候更新即可。之后对于每次查询，二分位置即可。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TopVotedCandidate</span> </span>&#123;</span><br><span class="line">    List&lt;Vote&gt; A;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TopVotedCandidate</span><span class="params">(<span class="keyword">int</span>[] persons, <span class="keyword">int</span>[] times)</span> </span>&#123;</span><br><span class="line">        A = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        Map&lt;Integer, Integer&gt; count = <span class="keyword">new</span> HashMap();</span><br><span class="line">        <span class="keyword">int</span> leader = -<span class="number">1</span>;  <span class="comment">// current leader</span></span><br><span class="line">        <span class="keyword">int</span> m = <span class="number">0</span>;  <span class="comment">// current number of votes for leader</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; persons.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> p = persons[i], t = times[i];</span><br><span class="line">            <span class="keyword">int</span> c = count.getOrDefault(p, <span class="number">0</span>) + <span class="number">1</span>;</span><br><span class="line">            count.put(p, c);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (c &gt;= m) &#123;</span><br><span class="line">                <span class="keyword">if</span> (p != leader) &#123;  <span class="comment">// lead change</span></span><br><span class="line">                    leader = p;</span><br><span class="line">                    A.add(<span class="keyword">new</span> Vote(leader, t));</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (c &gt; m) m = c;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">q</span><span class="params">(<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> lo = <span class="number">1</span>, hi = A.size();</span><br><span class="line">        <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">            <span class="keyword">int</span> mi = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (A.get(mi).time &lt;= t)</span><br><span class="line">                lo = mi + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                hi = mi;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> A.get(lo - <span class="number">1</span>).person;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vote</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> person, time;</span><br><span class="line">    Vote(<span class="keyword">int</span> p, <span class="keyword">int</span> t) &#123;</span><br><span class="line">        person = p;</span><br><span class="line">        time = t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">作者：LeetCode</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/online-election/solution/zai-xian-xuan-ju-by-leetcode/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">MiracleSNeko</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2021/11/15/virtual-contest-103/">http://example.com/2021/11/15/virtual-contest-103/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/LeetCode-%E5%91%A8%E8%B5%9B%E6%80%BB%E7%BB%93/">LeetCode 周赛总结</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/11/17/virtual-contest-185/"><img class="prev-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">LeetCode 虚拟周赛 185</div></div></a></div><div class="next-post pull-right"><a href="/2021/11/14/biweekly-contest-65/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">LeetCode 双周赛 65</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2021/09/19/biweekly-contest-61/" title="LeetCode 双周赛 61"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-19</div><div class="title">LeetCode 双周赛 61</div></div></a></div><div><a href="/2021/10/06/biweekly-contest-62/" title="LeetCode 双周赛 62"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-06</div><div class="title">LeetCode 双周赛 62</div></div></a></div><div><a href="/2021/09/19/weekly-contest-259/" title="LeetCode 周赛 259"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-19</div><div class="title">LeetCode 周赛 259</div></div></a></div><div><a href="/2021/10/10/weekly-contest-262/" title="LeetCode 周赛 262"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-10</div><div class="title">LeetCode 周赛 262</div></div></a></div><div><a href="/2021/10/17/weekly-contest-263/" title="LeetCode 周赛 263"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-17</div><div class="title">LeetCode 周赛 263</div></div></a></div><div><a href="/2021/11/14/weekly-contest-267/" title="LeetCode 周赛 267"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-14</div><div class="title">LeetCode 周赛 267</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">MiracleSNeko</div><div class="author-info__description">世界には今も確かに希望がありますよ。</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">21</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">6</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#LeetCode-%E8%99%9A%E6%8B%9F%E5%91%A8%E8%B5%9B-103"><span class="toc-number">1.</span> <span class="toc-text">LeetCode 虚拟周赛 103</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#T1-908-%E6%9C%80%E5%B0%8F%E5%B7%AE%E5%80%BC-I"><span class="toc-number">1.1.</span> <span class="toc-text">T1 908. 最小差值 I</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#T2-909-%E8%9B%87%E6%A2%AF%E6%A3%8B"><span class="toc-number">1.2.</span> <span class="toc-text">T2 909. 蛇梯棋</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#L3-910-%E6%9C%80%E5%B0%8F%E5%B7%AE%E5%80%BC-II"><span class="toc-number">1.3.</span> <span class="toc-text">L3 910. 最小差值 II</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#T4-911-%E5%9C%A8%E7%BA%BF%E9%80%89%E4%B8%BE"><span class="toc-number">1.4.</span> <span class="toc-text">T4 911. 在线选举</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/01/09/weekly-contest-275/" title="LeetCode 周赛 275"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LeetCode 周赛 275"/></a><div class="content"><a class="title" href="/2022/01/09/weekly-contest-275/" title="LeetCode 周赛 275">LeetCode 周赛 275</a><time datetime="2022-01-09T06:12:09.000Z" title="Created 2022-01-09 14:12:09">2022-01-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/26/weekly-contest-273/" title="LeetCode 周赛 273"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LeetCode 周赛 273"/></a><div class="content"><a class="title" href="/2021/12/26/weekly-contest-273/" title="LeetCode 周赛 273">LeetCode 周赛 273</a><time datetime="2021-12-26T09:26:21.000Z" title="Created 2021-12-26 17:26:21">2021-12-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/19/weekly-contest-272/" title="LeetCode 周赛 272"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LeetCode 周赛 272"/></a><div class="content"><a class="title" href="/2021/12/19/weekly-contest-272/" title="LeetCode 周赛 272">LeetCode 周赛 272</a><time datetime="2021-12-19T05:56:42.000Z" title="Created 2021-12-19 13:56:42">2021-12-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/12/weekly-contest-271/" title="LeetCode 周赛 271"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LeetCode 周赛 271"/></a><div class="content"><a class="title" href="/2021/12/12/weekly-contest-271/" title="LeetCode 周赛 271">LeetCode 周赛 271</a><time datetime="2021-12-12T11:43:20.000Z" title="Created 2021-12-12 19:43:20">2021-12-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/28/weekly-contest-269/" title="LeetCode 周赛 269"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LeetCode 周赛 269"/></a><div class="content"><a class="title" href="/2021/11/28/weekly-contest-269/" title="LeetCode 周赛 269">LeetCode 周赛 269</a><time datetime="2021-11-28T13:05:37.000Z" title="Created 2021-11-28 21:05:37">2021-11-28</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By MiracleSNeko</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script defer src="/live2d-widget/autoload.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>